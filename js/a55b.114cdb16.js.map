{"version":3,"sources":["webpack:///./src/views/Login.vue?ac8a","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5da6","webpack:///./src/views/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","fill-height","fluid","align-center","justify-center","xs12","sm8","md4","title","$t","color","ref","rules","username","label","prepend-icon","placeholder","required","model","value","callback","$$v","expression","password","append-icon","showPassword","type","counter","on","keydown","$event","indexOf","_k","keyCode","key","login","click:append","staticClass","click","_v","_s","to","staticRenderFns","Loginvue_type_script_lang_js_","mixins","recaptcha","data","methods","_login","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","recaptchaToken","response","token","user","errMsg","wrap","_context","prev","next","$refs","form","validate","$store","commit","overlay","getRecaptchaToken","sent","$http","post","email","g_recaptcha_response","access_token","localStorage","setItem","defaults","headers","common","authStatus","$router","push","t0","console","error","alertMessage","removeItem","stop","apply","arguments","metaInfo","views_Loginvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/a55b.114cdb16.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-content',[_c('v-container',{attrs:{\"fill-height\":\"\",\"fluid\":\"\"}},[_c('v-layout',{attrs:{\"align-center\":\"\",\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"sm8\":\"\",\"md4\":\"\"}},[_c('material-card',{attrs:{\"title\":_vm.$t('login'),\"color\":\"info\"}},[_c('v-card-text',[_c('v-form',{ref:\"form\"},[_c('v-text-field',{ref:\"username\",attrs:{\"rules\":[function () { return !!_vm.username || _vm.$t('requiredMessage'); }],\"label\":_vm.$t('email'),\"prepend-icon\":\"mdi-account\",\"placeholder\":\"user@email.com\",\"required\":\"\"},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('v-text-field',{ref:\"password\",attrs:{\"rules\":[function () { return !!_vm.password || _vm.$t('requiredMessage'); }],\"append-icon\":_vm.showPassword ? 'mdi-eye-off' : 'mdi-eye',\"type\":_vm.showPassword ? 'text' : 'password',\"label\":_vm.$t('password'),\"prepend-icon\":\"mdi-lock\",\"placeholder\":\"*********\",\"counter\":\"\",\"required\":\"\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.login($event)},\"click:append\":function($event){_vm.showPassword = !_vm.showPassword}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1)],1),_c('v-divider',{staticClass:\"mt-5\"}),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"align-center\":\"\",\"justify-center\":\"\",\"color\":\"info\"},on:{\"click\":_vm.login}},[_vm._v(_vm._s(_vm.$t('login'))+\"\\n            \")]),_c('v-btn',{attrs:{\"align-center\":\"\",\"justify-center\":\"\",\"to\":\"register\"}},[_vm._v(_vm._s(_vm.$t('register'))+\"\\n            \")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-content>\n    <v-container\n      fill-height\n      fluid>\n      <v-layout\n        align-center\n        justify-center>\n        <v-flex\n          xs12\n          sm8\n          md4>\n          <material-card\n            :title=\"$t('login')\"\n            color=\"info\"\n          >\n            <v-card-text>              \n              <v-form ref=\"form\">\n                <v-text-field\n                  ref=\"username\"\n                  v-model=\"username\"\n                  :rules=\"[() => !!username || $t('requiredMessage')]\"\n                  :label=\"$t('email')\"\n                  prepend-icon=\"mdi-account\"\n                  placeholder=\"user@email.com\"\n                  required\n                />\n                <v-text-field\n                  ref=\"password\"\n                  v-model=\"password\"\n                  :rules=\"[() => !!password || $t('requiredMessage')]\"\n                  :append-icon=\"showPassword ? 'mdi-eye-off' : 'mdi-eye'\"\n                  :type=\"showPassword ? 'text' : 'password'\"\n                  :label=\"$t('password')\"\n                  prepend-icon=\"mdi-lock\"\n                  placeholder=\"*********\"\n                  counter\n                  required\n                  @keydown.enter=\"login\"\n                  @click:append=\"showPassword = !showPassword\"\n                />\n              </v-form>\n            </v-card-text>\n            <v-divider class=\"mt-5\"/>\n            <v-card-actions>\n              <v-spacer/>\n              <v-btn\n                align-center\n                justify-center\n                color=\"info\"\n                @click=\"login\">{{ $t('login') }}\n              </v-btn>\n              <v-btn\n                align-center\n                justify-center\n                to=\"register\">{{ $t('register') }}\n              </v-btn>\n            </v-card-actions>\n          </material-card>\n        </v-flex>\n      </v-layout>\n\n    </v-container>\n  </v-content>\n</template>\n\n<script>\nimport { recaptcha } from '@/mixins/recaptcha.js'\n\nexport default {\n  mixins: [recaptcha],\n  data: function () {\n    return {\n      username: '',\n      password: '',\n      showPassword: false\n    }\n  },\n\n  // Sends action to Vuex that will log you in and redirect to the dash otherwise, error\n  methods: {\n    login: async function () {\n      if (this.$refs.form.validate()) {\n        this.$store.commit('update', { overlay: true })\n        try {\n          // get recaptcha token\n          let recaptchaToken = await this.getRecaptchaToken('login')\n          // attempt login to server\n          let response = await this.$http.post('/auth/login', {\n            email: this.username,\n            password: this.password,\n            g_recaptcha_response: recaptchaToken\n          })\n          const token = response.data.access_token\n          const user = response.data.email\n          // console.log(response)\n          // storing jwt in localStorage. https cookie is safer place to store\n          localStorage.setItem('token', token)\n          localStorage.setItem('user', user)\n          this.$http.defaults.headers.common['Authorization'] = 'Bearer ' + token\n          // mutation to change state properties to the values passed along\n          this.$store.commit('update', {\n            overlay: false,\n            authStatus: 'success',\n            token: token,\n            user: user\n          })\n          this.$router.push('/')\n        } catch (err) {\n          console.error(err)\n          let errMsg = err.response.data || err\n          this.$store.commit('update', {\n            overlay: false,\n            alertMessage: errMsg,\n            authStatus: 'error',\n            token: null,\n            user: null\n          })\n          localStorage.removeItem('token')\n          localStorage.removeItem('user')\n          this.recaptchaToken = null\n        }\n      }\n    }\n  },\n  metaInfo () {\n    return {\n      title: this.$t('login') + ' | ' + this.$t('title')\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=eaa297d4&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}